# êµíšŒ ì¹´í˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ

êµíšŒ ì¹´í˜ë¥¼ ìœ„í•œ íš¨ìœ¨ì ì¸ ì›¹ ê¸°ë°˜ ì£¼ë¬¸ ë° ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Supabaseë¥¼ ë°±ì—”ë“œë¡œ, Remixë¥¼ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ë¡œ í™œìš©í•˜ì—¬ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### âœ… ì™„ì„±ëœ ê¸°ëŠ¥

#### ì£¼ë¬¸ ë° ìŒë£Œ ì œì¡° ê´€ë¦¬
- **ìŒë£Œ ì£¼ë¬¸ ì ‘ìˆ˜**: ì§ê´€ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¹ ë¥´ê³  ì •í™•í•œ ì£¼ë¬¸ ì ‘ìˆ˜
- **ì£¼ë¬¸ í˜„í™©íŒ**: ì‹¤ì‹œê°„ ì£¼ë¬¸ ìƒíƒœ í™•ì¸ (ëŒ€ê¸° ì¤‘, ì œì¡° ì¤‘, ì™„ë£Œ, í”½ì—…ì™„ë£Œ, ì·¨ì†Œ)
- **ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬**: ì œì¡° ì‹œì‘, ì œì¡° ì™„ë£Œ, í”½ì—… ì™„ë£Œ ë“± ìƒíƒœ ë³€ê²½
- **ë©”ë‰´ ê´€ë¦¬**: ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ, íŒë§¤ ìƒíƒœ ê´€ë¦¬

#### ê²°ì œ í™•ì¸ ë° ê±°ë˜ ê¸°ë¡
- **ê²°ì œ ë°©ì‹**: í˜„ê¸ˆ ë° ê³„ì¢Œ ì´ì²´ ì§€ì›
- **ê²°ì œ í™•ì¸**: ìˆ˜ë™ ê²°ì œ í™•ì¸ ë° ìƒíƒœ ê´€ë¦¬
- **ê±°ë˜ ê¸°ë¡**: ë‚ ì§œë³„, ê³ ê°ë³„, ëª©ì¥ë³„ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ

#### ë°ì´í„° ê´€ë¦¬ ë° í†µê³„
- **ìë™ ê³„ì‚°**: ì£¼ë¬¸ ì‹œ ì´ ê¸ˆì•¡ ìë™ ê³„ì‚°
- **ë§¤ì¶œ ë°ì´í„°**: ì¼ë³„, ì£¼ë³„, ì›”ë³„ ë§¤ì¶œ í˜„í™©
- **ì¸ê¸° ë©”ë‰´ ë¶„ì„**: ë©”ë‰´ë³„ íŒë§¤ ë°ì´í„° ë¶„ì„
- **ëª©ì¥ë³„ í†µê³„**: ëª©ì¥ë³„ ì£¼ë¬¸ í˜„í™© ë° ë§¤ì¶œ ë¶„ì„
- **ì‹œê°„ëŒ€ë³„ ë¶„ì„**: ì‹œê°„ëŒ€ë³„ ì£¼ë¬¸ í˜„í™© ì°¨íŠ¸

#### ì‚¬ìš©ì ê¸°ëŠ¥
- **ëª©ì¥ë³„ ì£¼ë¬¸**: êµíšŒ ëª©ì¥ ë‹¨ìœ„ ì£¼ë¬¸ ê´€ë¦¬
- **ê³ ê°ë³„ ì£¼ë¬¸**: ê°œë³„ ê³ ê° ì£¼ë¬¸ ë‚´ì—­ ê´€ë¦¬
- **ìš”ì²­ì‚¬í•­**: ì£¼ë¬¸ë³„ íŠ¹ë³„ ìš”ì²­ì‚¬í•­ ì…ë ¥

## ğŸ¨ ë””ìì¸ ê°€ì´ë“œë¼ì¸

- **ë©”ì¸ ì»¬ëŸ¬**: ë ˆë“œ ì™€ì¸ (Red Wine) - ë”°ëœ»í•˜ê³  ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ëŠë‚Œ
- **ë³´ì¡° ì»¬ëŸ¬**: ìƒì•„ìƒ‰ (Ivory) - ê¹”ë”í•˜ê³  ë¶€ë“œëŸ¬ìš´ ëŠë‚Œ
- **UI/UX**: 
  - í˜„ëŒ€ì ì¸ ê·¸ë¼ë°ì´ì…˜ ë””ìì¸
  - ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
  - ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
  - ì§ê´€ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
- **Remix**: SSR ë° í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§ ìµœì í™”
- **TypeScript**: íƒ€ì… ì•ˆì •ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS í”„ë ˆì„ì›Œí¬
- **Vite**: ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° ë¹Œë“œ ë„êµ¬

### ë°±ì—”ë“œ
- **Supabase**: 
  - PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - Row Level Security (RLS)
  - ì‹¤ì‹œê°„ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone https://github.com/zanehc/theway.git
cd theway
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  Supabase ì„¤ì •ì„ ì¶”ê°€í•˜ì„¸ìš”:

```env
# Supabase ì„¤ì •
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ì•± ì„¤ì •
NODE_ENV=development
```

### 4. Supabase í”„ë¡œì íŠ¸ ì„¤ì •

1. Supabaseì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. ë‹¤ìŒ SQL ìŠ¤í‚¤ë§ˆë¥¼ Supabase SQL í¸ì§‘ê¸°ì—ì„œ ì‹¤í–‰:

#### 4.1. ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì„¤ì •

```sql
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Users table
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email TEXT UNIQUE NOT NULL,
  name TEXT NOT NULL,
  role TEXT NOT NULL CHECK (role IN ('customer', 'staff', 'admin')),
  church_group TEXT, -- ëª©ì¥ ì •ë³´
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Menus table
CREATE TABLE menus (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  description TEXT,
  price DECIMAL(10,2) NOT NULL CHECK (price >= 0),
  category TEXT NOT NULL,
  image_url TEXT,
  is_available BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Orders table
CREATE TABLE orders (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE SET NULL,
  customer_name TEXT NOT NULL,
  church_group TEXT, -- ëª©ì¥ ì •ë³´
  total_amount DECIMAL(10,2) NOT NULL CHECK (total_amount >= 0),
  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'preparing', 'ready', 'completed', 'cancelled')),
  payment_method TEXT NOT NULL CHECK (payment_method IN ('cash', 'transfer')),
  payment_status TEXT NOT NULL DEFAULT 'pending' CHECK (payment_status IN ('pending', 'confirmed')),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Order items table
CREATE TABLE order_items (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  order_id UUID NOT NULL REFERENCES orders(id) ON DELETE CASCADE,
  menu_id UUID NOT NULL REFERENCES menus(id) ON DELETE RESTRICT,
  quantity INTEGER NOT NULL CHECK (quantity > 0),
  unit_price DECIMAL(10,2) NOT NULL CHECK (unit_price >= 0),
  total_price DECIMAL(10,2) NOT NULL CHECK (total_price >= 0),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ê¸°ë³¸ ë©”ë‰´ ë°ì´í„° ì¶”ê°€ (ì„ íƒì‚¬í•­)
-- init_menus.sql íŒŒì¼ì„ ì°¸ì¡°í•˜ì—¬ ê¸°ë³¸ ë©”ë‰´ ë°ì´í„°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

#### 4.2. OAuth ì„¤ì • (êµ¬ê¸€ ë¡œê·¸ì¸)

1. **Supabase ëŒ€ì‹œë³´ë“œ** â†’ **Authentication** â†’ **Providers** â†’ **Google** í™œì„±í™”
2. **Google Cloud Console**ì—ì„œ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±:
   - https://console.cloud.google.com/apis/credentials ì ‘ì†
   - "ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" â†’ "OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID"
   - ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•: "ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜"
   - ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI: `https://your-project.supabase.co/auth/v1/callback`
3. ìƒì„±ëœ **Client ID**ì™€ **Client Secret**ì„ Supabase Google Providerì— ì…ë ¥
4. **Redirect URL**ì„ `https://your-project.supabase.co/auth/v1/callback`ë¡œ ì„¤ì •

#### 4.3. Row Level Security (RLS) ì„¤ì •

ë‹¤ìŒ SQLì„ ì‹¤í–‰í•˜ì—¬ ì‚¬ìš©ì í…Œì´ë¸”ì— RLS ì •ì±…ì„ ì„¤ì •í•˜ì„¸ìš”:

```sql
-- Add church_group column to users table if it doesn't exist
DO $$ 
BEGIN
    IF NOT EXISTS (
        SELECT 1 
        FROM information_schema.columns 
        WHERE table_name = 'users' 
        AND column_name = 'church_group'
    ) THEN
        ALTER TABLE users ADD COLUMN church_group TEXT;
    END IF;
END $$;

-- Update RLS policies for users table
DROP POLICY IF EXISTS "Users can view own profile" ON users;
DROP POLICY IF EXISTS "Admins can view all users" ON users;
DROP POLICY IF EXISTS "Users can update own profile" ON users;
DROP POLICY IF EXISTS "Admins can update all users" ON users;

-- Users can view their own profile
CREATE POLICY "Users can view own profile" ON users
    FOR SELECT USING (auth.uid() = id);

-- Admins can view all users
CREATE POLICY "Admins can view all users" ON users
    FOR SELECT USING (
        EXISTS (
            SELECT 1 FROM users 
            WHERE id = auth.uid() AND role = 'admin'
        )
    );

-- Users can update their own profile
CREATE POLICY "Users can update own profile" ON users
    FOR UPDATE USING (auth.uid() = id);

-- Admins can update all users
CREATE POLICY "Admins can update all users" ON users
    FOR UPDATE USING (
        EXISTS (
            SELECT 1 FROM users 
            WHERE id = auth.uid() AND role = 'admin'
        )
    );

-- Users can insert their own profile (for new registrations)
CREATE POLICY "Users can insert own profile" ON users
    FOR INSERT WITH CHECK (auth.uid() = id);

-- Enable RLS on users table
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
```

5. í™˜ê²½ ë³€ìˆ˜ì— í”„ë¡œì íŠ¸ URLê³¼ API í‚¤ ì„¤ì •

#### 4.4. ê¸°ë³¸ ë©”ë‰´ ë°ì´í„° ì¶”ê°€ (ì„ íƒì‚¬í•­)

ê¸°ë³¸ ë©”ë‰´ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ `init_menus_with_images.sql` íŒŒì¼ì˜ ë‚´ìš©ì„ Supabase SQL í¸ì§‘ê¸°ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”:

```sql
-- init_menus_with_images.sql íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ì‹¤í–‰
-- ì´ íŒŒì¼ì—ëŠ” ì´ë¯¸ì§€ URLì´ í¬í•¨ëœ ë©”ë‰´ ë°ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤
```

### 5. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:5173`ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
theway/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ Header.tsx              # í—¤ë” ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ Header.tsx              # í—¤ë” ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase.ts             # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ database.ts             # ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ í•¨ìˆ˜
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ _index.tsx              # ëŒ€ì‹œë³´ë“œ (í™ˆí˜ì´ì§€)
â”‚   â”‚   â”œâ”€â”€ orders._index.tsx       # ì£¼ë¬¸ í˜„í™©íŒ
â”‚   â”‚   â”œâ”€â”€ orders.new.tsx          # ìƒˆ ì£¼ë¬¸ ì…ë ¥
â”‚   â”‚   â”œâ”€â”€ menus._index.tsx        # ë©”ë‰´ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ reports._index.tsx      # ë§¤ì¶œ ë³´ê³ 
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts                # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ root.tsx                    # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â””â”€â”€ tailwind.css                # Tailwind CSS ìŠ¤íƒ€ì¼
â”œâ”€â”€ public/                         # ì •ì  íŒŒì¼
â”œâ”€â”€ package.json
â””â”€â”€ tailwind.config.ts              # Tailwind CSS ì„¤ì •
```

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ì£¼ìš” í…Œì´ë¸”

- **users**: ì‚¬ìš©ì ì •ë³´ (ê³ ê°, ì§ì›, ê´€ë¦¬ì)
- **menus**: ë©”ë‰´ ì •ë³´ (ìŒë£Œ ì¢…ë¥˜, ê°€ê²©, ì¹´í…Œê³ ë¦¬)
- **orders**: ì£¼ë¬¸ ì •ë³´ (ê³ ê°, ì´ ê¸ˆì•¡, ìƒíƒœ, ê²°ì œ ë°©ë²•)
- **order_items**: ì£¼ë¬¸ í•­ëª© (ë©”ë‰´ë³„ ìˆ˜ëŸ‰, ê°€ê²©)

### ë°ì´í„° íƒ€ì…

```typescript
// ì‚¬ìš©ì ì—­í• 
type UserRole = 'customer' | 'staff' | 'admin';

// ì£¼ë¬¸ ìƒíƒœ
type OrderStatus = 'pending' | 'preparing' | 'ready' | 'completed' | 'cancelled';

// ê²°ì œ ë°©ë²•
type PaymentMethod = 'cash' | 'transfer';

// ê²°ì œ ìƒíƒœ
type PaymentStatus = 'pending' | 'confirmed';
```

## ğŸ“± ì£¼ìš” í˜ì´ì§€

### ëŒ€ì‹œë³´ë“œ (`/`)
- ì‹œìŠ¤í…œ í†µê³„ (ì´ ë©”ë‰´, ì´ ì£¼ë¬¸, ëŒ€ê¸° ì¤‘, ì™„ë£Œ)
- ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ (ìƒˆ ì£¼ë¬¸, ì£¼ë¬¸ í˜„í™©, ë©”ë‰´ ê´€ë¦¬)
- ìµœê·¼ ì£¼ë¬¸ ëª©ë¡

### ì£¼ë¬¸ í˜„í™©íŒ (`/orders`)
- ì‹¤ì‹œê°„ ì£¼ë¬¸ ìƒíƒœ í™•ì¸
- ìƒíƒœë³„ í•„í„°ë§
- ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ (ì œì¡° ì‹œì‘, ì™„ë£Œ, í”½ì—… ì™„ë£Œ)
- ê²°ì œ ìƒíƒœ í™•ì¸

### ìƒˆ ì£¼ë¬¸ ì…ë ¥ (`/orders/new`)
- ì¹´í…Œê³ ë¦¬ë³„ ë©”ë‰´ ì„ íƒ
- ìˆ˜ëŸ‰ ì¡°ì ˆ ë° ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥
- ê³ ê° ì •ë³´ ì…ë ¥ (ì´ë¦„, ëª©ì¥)
- ê²°ì œ ë°©ë²• ì„ íƒ
- ìš”ì²­ì‚¬í•­ ì…ë ¥

### ë©”ë‰´ ê´€ë¦¬ (`/menus`)
- ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
- ìƒˆ ë©”ë‰´ ì¶”ê°€
- ë©”ë‰´ ìˆ˜ì •/ì‚­ì œ
- íŒë§¤ ìƒíƒœ ê´€ë¦¬

### ë§¤ì¶œ ë³´ê³  (`/reports`)
- ê¸°ê°„ë³„ ë§¤ì¶œ í†µê³„ (ì˜¤ëŠ˜/ì´ë²ˆì£¼/ì´ë²ˆë‹¬)
- ì¸ê¸° ë©”ë‰´ ë¶„ì„
- ëª©ì¥ë³„ ì£¼ë¬¸ í˜„í™©
- ì‹œê°„ëŒ€ë³„ ì£¼ë¬¸ í˜„í™©
- ìµœê·¼ ì£¼ë¬¸ ëª©ë¡

## ğŸš€ ë°°í¬

### Vercel ë°°í¬ (ê¶Œì¥)

1. Vercelì— í”„ë¡œì íŠ¸ ì—°ê²°
2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
3. ìë™ ë°°í¬ ì„¤ì •

```bash
npm run build
```

### ê¸°íƒ€ í”Œë«í¼

- Netlify
- Railway
- Heroku

## ğŸ”§ ê°œë°œ

### ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

### ë¹Œë“œ
```bash
npm run build
```

### íƒ€ì… ì²´í¬
```bash
npm run typecheck
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ğŸ“ ì§€ì›

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

---

**êµíšŒ ì¹´í˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ** - íš¨ìœ¨ì ì¸ ì¹´í˜ ìš´ì˜ì„ ìœ„í•œ ìŠ¤ë§ˆíŠ¸í•œ ì†”ë£¨ì…˜

## ìµœê·¼ ì—…ë°ì´íŠ¸

### v1.0.0 (2025-01-04)
- âœ… êµíšŒ ì¹´í˜ ì£¼ë¬¸ ì‹œìŠ¤í…œ ì™„ì„±
- âœ… í˜„ëŒ€ì ì¸ UI/UX ë””ìì¸ ì ìš©
- âœ… Supabase ì—°ë™ ì™„ë£Œ
- âœ… ì£¼ë¬¸ ê´€ë¦¬, ë©”ë‰´ ê´€ë¦¬, ë§¤ì¶œ ë³´ê³  ê¸°ëŠ¥ êµ¬í˜„
- âœ… ë°˜ì‘í˜• ë””ìì¸ ì ìš©
- âœ… TypeScript íƒ€ì… ì•ˆì •ì„± í™•ë³´
